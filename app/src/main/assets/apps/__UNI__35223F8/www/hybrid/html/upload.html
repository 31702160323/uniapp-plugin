<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>上传文件</title>
	</head>
	<body>
		<script type="text/javascript" src="https://js.cdn.aliyun.dcloud.net.cn/dev/uni-app/uni.webview.1.5.2.js"></script>
		<script type="text/javascript">
			// H5 plus事件处理
			function plusReady() {
			}
			if (window.plus) {
				plusReady();
			} else {
				document.addEventListener('plusready', plusReady, false);
			}
			
			function upload(path) {
				console.log("path: ", path);
				plus.io.resolveLocalFileSystemURL(path, function(entry) {
					entry.file(function(file) {
						console.log('file', file instanceof Blob);
						let formData = new FormData();
						formData.append('file', file);
						
						let xhr = new XMLHttpRequest();
						xhr.open('POST', 'http://192.168.31.109:7777/upload/file');
						xhr.setRequestHeader("Content-Type", "multipart/form-data");
						xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
						// xhr.overrideMimeType("application/octet-stream");
						xhr.onreadystatechange = function () {
						  if (xhr.readyState === 4 && xhr.status === 200) {
							  console.log("上传成功: ", xhr.responseText);
						  } else if(xhr.status === 200) {
							  console.log("上传出错: ", xhr);
						  }
						}
						xhr.send(formData);
					});
				}, function(e) {
					
				});
			}
		</script>
	</body>
</html>